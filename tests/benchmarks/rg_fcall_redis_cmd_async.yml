version: 0.2
name: "rg_fcall_redis_cmd"
description: "Simple script calling a redis command."
remote:
 - type: oss-1nodes
 - setup: c5.4xlarge
dbconfig:
  - init_commands:
    - ["RG.FUNCTION","LOAD","#!js name=lib\n redis.register_function('foo', async (client)=>{return client.call('PING');});"]
clientconfig:
  benchmark_type: "read-only"
  tool: memtier_benchmark
  arguments: "--test-time 180 -c 32 -t 1 --hide-histogram --command 'rg.fcall lib foo 0'"
